<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="description" content="Monitoring dashboard for XR Cube">
        <meta name="author" content="Thomas Peng">

        <title>XR Dashboard</title>

        <link rel="shortcut icon" href="/static/img/xrcube_logo.ico">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
            rel="stylesheet">
        <link
            href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500&amp;display=swap"
            rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We"
            crossorigin="anonymous">

        <link rel="stylesheet" href="/static/css/ovenspace.css">

    </head>

    <body class="app">
        <div class="app-wrapper d-flex flex-column">

            <div class="header">
                <div
                    class=" container d-flex flex-row flex-sm-row align-items-sm-end justify-content-between">
                    <div class="container pt-4 pb-3">
                        <h3 class="text-nowrap"><img src="/static/img/xrcube_logo.png" width="170"
                                alt="XR Cube"> |
                            Dashboard - Edge {{edge_id}}</h3>
                    </div>
                </div>

            </div>
            <div class="body" id="page-area">
                <div class="container flex-grow-1 pt-4 tabcontent" id="detail">
                    <div id="detail_inner" class="row">
                        <div class="container d-flex flex-column align-items-center">
                            <div class="container row d-flex">
                                <div class="col-8">
                                    <div class="seat mb-4 ratio ratio-16x9">
                                        <div class="player-area">
                                            <div id="player_edge"></div>
                                        </div>
                                        <div class="name-holder h-25">
                                            <p id="stream-name" class="fa-2x">EDGE GPU {{edge_id}}
                                                (<span id="edge_resolution">Cannot get
                                                    resolution</span>)
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div class="container col-4 d-flex flex-column">
                                    <div>
                                        <div id="IP"
                                            class="d-flex flex-column align-items-center py-2"
                                            style="border:1px solid black">
                                            <h3>IP:</h3>
                                            <h3>my_ip</h3>
                                        </div>
                                    </div>
                                    <div>
                                        <div id="gpu_name"
                                            class="d-flex flex-column align-items-center py-2"
                                            style="border:1px solid black">
                                            <h3>GPU:</h3>
                                            <h3>my_gpu</h3>
                                        </div>
                                    </div>

                                    <div id="hardware"
                                        class="container d-flex flex-row justify-content-center px-0">
                                        <iframe id='cpu' class="col-6" height="190"
                                            frameborder="0"></iframe>
                                        <iframe id='gpu' class="col-6" height="190"
                                            frameborder="0"></iframe>
                                    </div>
                                </div>
                            </div>
                            <div id="net"
                                class="container row d-flex flex-row justify-content-center">
                                <iframe id='latency' class="col-4" height="250"
                                    frameborder="0"></iframe>
                                <iframe id='throughput' class="col-4" height="250"
                                    frameborder="0"></iframe>
                                <iframe id='packet_loss' class="col-4" height="250"
                                    frameborder="0"></iframe>
                            </div>
                        </div>
                    </div>
                </div>

                <script>
                    const protocal = "https";
                    const GRAFANA_HOST = "{{grafana_host}}";
                    const port = "3000";
                    const dashboardId = "b4307069-b390-4c30-adac-e7397c3e672bd"
                    const dashboard_name = "xrcubee"
                    const theme = "{{theme}}"
                    const hours = 6;

                    function get_src(panel_id) {
                        return protocal + "://" + GRAFANA_HOST + ":" + port
                            + "/d-solo/" + dashboardId + "/" + dashboard_name
                            + "?orgId=1&refresh=5s&from=now-" + hours + "h&to=now&theme=" + theme
                            + "&panelId=" + panel_id;
                    }

                    document.getElementById("gpu").src = get_src('{{edge_id}}');
                    document.getElementById("cpu").src = get_src('{{edge_id}}');
                    document.getElementById("latency").src = get_src('{{edge_id}}');
                    document.getElementById("throughput").src = get_src('{{edge_id}}');
                    document.getElementById("packet_loss").src = get_src('{{edge_id}}');
                </script>
            </div>
        </div>

        <!-- <script>
            const APP_NAME = '{{app_name}}';
            const STREAM_NAME = '{{stream_name}}';
            const OME_RTMP_INPUT_URL = '{{rtmp_input_url}}';
            const OME_SRT_INPUT_URL = '{{srt_input_url}}';
            const OME_WEBRTC_INPUT_HOST = '{{webrtc_input_host}}';
            const OME_WEBRTC_STREAMING_HOST = '{{webrtc_streaming_host}}';
            const OME_LLHLS_STREAMING_HOST = '{{llhls_streaming_host}}';

            // new config
            const MAX_STREAM_PER_PAGE = '8';

        </script> -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"
            integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
            crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/underscore@1.13.0/underscore-umd-min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj"
            crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.min.js"
            integrity="sha512-eVL5Lb9al9FzgR63gDs1MxcDS2wFu3loYAgjIH0+Hg38tCS8Ag62dwKyH+wzDb+QauDpEZjXbMn11blw8cbTJQ=="
            crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/hls.js@latest/dist/hls.min.js"></script>

        <!-- Load OvenLiveKit For Web -->
        <!-- <script
            src="https://cdn.jsdelivr.net/npm/ovenlivekit@1.0.4/dist/OvenLiveKit.min.js"></script> -->

        <!-- Load OvenPlayer -->
        <script src="https://cdn.jsdelivr.net/npm/ovenplayer/dist/ovenplayer.js"></script>

        <!-- Load OvenSpace -->
        <!-- <script src="/static/js/ovenspace.js"></script> -->
        <script src="/static/js/edge_monitor.js"></script>

    </body>


</html>
